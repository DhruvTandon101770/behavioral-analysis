{"ast":null,"code":"var _jsxFileName = \"/Users/piyush/Library/CloudStorage/OneDrive-UPES/Sem6/proj minor/behavioral-analysis/frontend/src/components/AnomalyChart.js\",\n  _s = $RefreshSig$();\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport React, { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport API_BASE_URL from \"../api\";\n\n// ✅ Register required scales and elements\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst socket = io(API_BASE_URL);\nfunction AnomalyChart() {\n  _s();\n  const [anomalies, setAnomalies] = useState([]);\n\n  // Fetch anomalies from backend\n  useEffect(() => {\n    const fetchAnomalies = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/get_anomalies`);\n        const data = await response.json();\n        setAnomalies(data);\n      } catch (error) {\n        console.error(\"Error fetching anomaly data:\", error);\n      }\n    };\n    fetchAnomalies();\n\n    // Listen for real-time anomalies\n    socket.on(\"anomaly_detected\", data => {\n      setAnomalies(prev => [...prev, {\n        timestamp: new Date().toISOString(),\n        is_anomaly: 1\n      }]);\n    });\n    return () => socket.off(\"anomaly_detected\");\n  }, []);\n  const chartData = {\n    labels: anomalies.map(entry => new Date(entry.timestamp).toLocaleTimeString()),\n    // Format time for X-axis\n    datasets: [{\n      label: \"Anomalies Detected\",\n      data: anomalies.map(entry => entry.is_anomaly ? 1 : 0),\n      // Y-axis: 1 (Anomaly) or 0 (Normal)\n      borderColor: \"red\",\n      backgroundColor: \"rgba(255, 0, 0, 0.5)\",\n      tension: 0.1\n    }]\n  };\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        display: true\n      }\n    },\n    scales: {\n      x: {\n        type: \"category\",\n        title: {\n          display: true,\n          text: \"Timestamp\"\n        }\n      },\n      y: {\n        type: \"linear\",\n        title: {\n          display: true,\n          text: \"Anomaly (0=Normal, 1=Anomaly)\"\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Anomaly Monitoring\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(AnomalyChart, \"VpVS98WWFMpEmd/fSGGVbuMEBZw=\");\n_c = AnomalyChart;\nexport default AnomalyChart;\nvar _c;\n$RefreshReg$(_c, \"AnomalyChart\");","map":{"version":3,"names":["Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","React","useEffect","useState","io","API_BASE_URL","jsxDEV","_jsxDEV","register","socket","AnomalyChart","_s","anomalies","setAnomalies","fetchAnomalies","response","fetch","data","json","error","console","on","prev","timestamp","Date","toISOString","is_anomaly","off","chartData","labels","map","entry","toLocaleTimeString","datasets","label","borderColor","backgroundColor","tension","options","responsive","plugins","legend","display","scales","x","type","title","text","y","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/piyush/Library/CloudStorage/OneDrive-UPES/Sem6/proj minor/behavioral-analysis/frontend/src/components/AnomalyChart.js"],"sourcesContent":["import { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport React, { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport API_BASE_URL from \"../api\";\n\n// ✅ Register required scales and elements\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\nconst socket = io(API_BASE_URL);\n\nfunction AnomalyChart() {\n  const [anomalies, setAnomalies] = useState([]);\n\n  // Fetch anomalies from backend\n  useEffect(() => {\n    const fetchAnomalies = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/get_anomalies`);\n        const data = await response.json();\n        setAnomalies(data);\n      } catch (error) {\n        console.error(\"Error fetching anomaly data:\", error);\n      }\n    };\n\n    fetchAnomalies();\n\n    // Listen for real-time anomalies\n    socket.on(\"anomaly_detected\", (data) => {\n      setAnomalies((prev) => [\n        ...prev,\n        { timestamp: new Date().toISOString(), is_anomaly: 1 },\n      ]);\n    });\n\n    return () => socket.off(\"anomaly_detected\");\n  }, []);\n\n  const chartData = {\n    labels: anomalies.map((entry) => new Date(entry.timestamp).toLocaleTimeString()), // Format time for X-axis\n    datasets: [\n      {\n        label: \"Anomalies Detected\",\n        data: anomalies.map((entry) => (entry.is_anomaly ? 1 : 0)), // Y-axis: 1 (Anomaly) or 0 (Normal)\n        borderColor: \"red\",\n        backgroundColor: \"rgba(255, 0, 0, 0.5)\",\n        tension: 0.1,\n      },\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    plugins: { legend: { display: true } },\n    scales: {\n      x: { type: \"category\", title: { display: true, text: \"Timestamp\" } },\n      y: { type: \"linear\", title: { display: true, text: \"Anomaly (0=Normal, 1=Anomaly)\" } },\n    },\n  };\n\n  return (\n    <div>\n      <h3>Anomaly Monitoring</h3>\n      <Line data={chartData} options={options} />\n    </div>\n  );\n}\n\nexport default AnomalyChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}